<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>اپلیکیشن هواشناسی تمامی استان ها و شهرهای مهم ایران</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;700&display=swap');

        body {
            font-family: 'Vazirmatn', Tahoma, sans-serif;
            direction: rtl;
            background: #e9f2ff;
            margin: 0;
            color: #333;
            line-height: 1.6;
        }

        header {
            background: linear-gradient(90deg, #1e3a8a, #0056b3);
            color: #fff;
            text-align: center;
            padding: 2rem 15px;
            position: relative;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }

        header h1 {
            margin: 0;
            font-size: 2.5rem;
            font-weight: 700;
        }

        #datetime {
            font-size: 1rem;
            margin-top: 10px;
            opacity: 0.8;
        }

        main {
            max-width: 1000px;
            margin: 2rem auto;
            padding: 20px;
            background: #fff;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
        }
        
        .selection-section {
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            justify-content: center;
            gap: 15px;
            padding-bottom: 20px;
            border-bottom: 2px solid #eee;
            margin-bottom: 20px;
        }
        
        .selection-section h2 {
            width: 100%;
            text-align: center;
            margin: 0 0 10px;
            color: #1e3a8a;
            font-size: 1.5rem;
        }

        select, button {
            padding: 10px 15px;
            margin: 5px 0;
            border-radius: 8px;
            border: 1px solid #ccc;
            background-color: #f9f9f9;
            font-family: 'Vazirmatn', Tahoma, sans-serif;
            transition: all 0.3s ease;
            cursor: pointer;
            min-width: 180px;
        }

        select:focus, button:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 5px rgba(0, 123, 255, 0.5);
        }

        button {
            background: #007bff;
            color: #fff;
            font-weight: bold;
        }

        button:hover {
            background: #0056b3;
            transform: translateY(-2px);
        }

        .info-box {
            margin-top: 20px;
            padding: 25px;
            background: #f0f8ff;
            border-radius: 12px;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.05);
            display: none;
            text-align: center;
            animation: fadeIn 0.8s ease-in-out;
        }

        .info-box h2 {
            margin-top: 0;
            font-size: 2rem;
            color: #0056b3;
        }
        
        .info-box p {
            font-size: 1.1rem;
            margin: 10px 0;
        }
        
        .weather-icon {
            width: 80px;
            height: 80px;
            margin: -10px auto 10px;
        }
        
        .weather-main-info {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
        }

        .forecast-list {
            list-style: none;
            padding: 0;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin-top: 25px;
        }

        .forecast-list li {
            background: #fff;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            min-width: 150px;
            text-align: center;
        }
        
        .forecast-list li strong {
            display: block;
            margin-bottom: 5px;
            color: #0056b3;
        }

        #comments {
            margin-top: 40px;
            background: #fdfdfd;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
        }

        #comments h3 {
            border-bottom: 2px solid #007bff;
            padding-bottom: 10px;
            color: #1e3a8a;
        }

        #commentForm {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        #commentForm input, #commentForm textarea {
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-family: 'Vazirmatn', Tahoma, sans-serif;
            font-size: 1rem;
        }

        #commentForm textarea {
            resize: vertical;
            min-height: 80px;
        }

        #commentForm button {
            background: #28a745;
        }

        #commentForm button:hover {
            background: #218838;
        }

        #commentList {
            list-style: none;
            padding: 0;
            margin-top: 20px;
        }

        #commentList li {
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            font-size: 1rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
        }

        footer {
            text-align: center;
            padding: 20px;
            background: #1e3a8a;
            color: white;
            margin-top: 30px;
            font-size: 0.9rem;
        }
        
        footer p {
            margin: 5px 0;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @media (max-width: 768px) {
            header h1 { font-size: 2rem; }
            main { padding: 10px; margin: 1rem; }
            .selection-section { flex-direction: column; }
            select, button { min-width: 100%; }
            .forecast-list { flex-direction: column; }
        }
    </style>
</head>
<body>
<header>
    <h1>🇮🇷 وضعیت آب‌وهوا</h1>
    <div id="datetime"></div>
</header>

<main>
    <div class="selection-section">
        <h2>📍 انتخاب استان و شهر</h2>
        <select id="provinceSelect"><option value="">استان را انتخاب کنید</option></select>
        <select id="citySelect"><option value="">شهر را انتخاب کنید</option></select>
        <button onclick="showCityInfo()">نمایش وضعیت آب‌وهوا</button>
    </div>

    <div id="cityInfo" class="info-box" style="display:none;"></div>

    <div id="comments">
        <h3>💬 نظرات کاربران</h3>
        <form id="commentForm">
            <input type="text" id="name" placeholder="نام شما" required>
            <textarea id="message" placeholder="نظر شما..." required></textarea>
            <button type="submit">ارسال نظر</button>
        </form>
        <ul id="commentList"></ul>
    </div>
</main>

<footer>
    <p>ساخته شده توسط <strong>ابوالفضل شاهمیرزایی</strong> - سال ۱۴۰۴</p>
    <p>این سایت از API <strong>OpenWeatherMap</strong> برای نمایش وضعیت آب‌وهوا استفاده می‌کند</p>
</footer>

<script>
const API_KEY = "679c8df302790ff616c5e67316a119e4";

const provinces = [
    {fa_name:"آذربایجان شرقی", en_name:"East Azerbaijan", cities:[{fa:"تبریز",en:"Tabriz"},{fa:"مراغه",en:"Maragheh"},{fa:"مرند",en:"Marand"},{fa:"اهر",en:"Ahar"},{fa:"میانه",en:"Meyaneh"},{fa:"بناب",en:"Bonab"},{fa:"اسکو",en:"Osku"},{fa:"شبستر",en:"Shabestar"},{fa:"سراب",en:"Sarab"},{fa:"جلفا",en:"Jolfa"},{fa:"آذرشهر",en:"Azarshahr"},{fa:"عجب‌شیر",en:"Ajabshir"},{fa:"هریس",en:"Heris"},{fa:"ملکان",en:"Malekan"},{fa:"ورزقان",en:"Varzaqan"},{fa:"کلیبر",en:"Kaleybar"},{fa:"بستان‌آباد",en:"Bostanabad"},{fa:"چاراویماق",en:"Charuymaq"},{fa:"خداآفرین",en:"Khoda Afarin"},{fa:"احدآباد",en:"Ahadabad"},{fa:"قره آغاج",en:"Qarah Aghaj"},{fa:"خسروشهر",en:"Khusrawshahr"},{fa:"گوگان",en:"Gugan"}]},
    {fa_name:"آذربایجان غربی", en_name:"West Azerbaijan", cities:[{fa:"ارومیه",en:"Urmia"},{fa:"خوی",en:"Khoy"},{fa:"میاندوآب",en:"Miandoab"},{fa:"مهاباد",en:"Mahabad"},{fa:"بوکان",en:"Bukan"},{fa:"سردشت",en:"Sardasht"},{fa:"ماکو",en:"Maku"},{fa:"نقده",en:"Naqadeh"},{fa:"شاهین‌دژ",en:"Shahindej"},{fa:"سلماس",en:"Salmas"},{fa:"پیرانشهر",en:"Piranshahr"},{fa:"تکاب",en:"Takab"},{fa:"اشنویه",en:"Oshnavieh"},{fa:"قره‌ضیاالدین",en:"Qarah Zia od Din"},{fa:"چالدران",en:"Chaldoran"},{fa:"شوط",en:"Shot"},{fa:"پلدشت",en:"Poldasht"},{fa:"بازرگان",en:"Bazargan"},{fa:"انزل",en:"Anzal"},{fa:"سیمینه",en:"Simineh"},{fa:"ربط",en:"Rabt"},{fa:"سرو",en:"Sarv"},{fa:"میرآباد",en:"Mirabad"},{fa:"باروق",en:"Baruq"}]},
    {fa_name: "اردبیل", en_name:"Ardabil", cities:[{fa:"اردبیل",en:"Ardabil"},{fa:"پارس‌آباد",en:"Parsabad"},{fa:"مشگین‌شهر",en:"Meshginshahr"},{fa:"خلخال",en:"Khalkhal"},{fa:"نمین",en:"Namin"},{fa:"نیر",en:"Nir"},{fa:"کوثر",en:"Kowsar"},{fa:"گرمی",en:"Germi"},{fa:"بیله‌سوار",en:"Bilesavar"},{fa:"اصلاندوز",en:"Aslanduz"},{fa:"سرعین",en:"Sareyn"},{fa:"گیوی",en:"Givi"},{fa:"جعفرآباد",en:"Jafarabod"},{fa:"هشتجین",en:"Hashtjin"},{fa:"قصابه",en:"Qasabeh"},{fa:"عنبران",en:"Anbaran"},{fa:"فیروزآباد",en:"Firouzabad"},{fa:"تازه کند انگوت",en:"Tazeh Kand Angut"},{fa:"کلور",en:"Kalour"},{fa:"هیر",en:"Hir"},{fa:"آبی بیگلو",en:"Abibeyglu"},{fa:"کوراییم",en:"Kureim"}]},
    {fa_name: "اصفهان", en_name:"Isfahan", cities:[{fa:"اصفهان",en:"Isfahan"},{fa:"کاشان",en:"Kashan"},{fa:"خمینی‌شهر",en:"Khomeinishahr"},{fa:"نجف‌آباد",en:"Najafabad"},{fa:"فلاورجان",en:"Falavarjan"},{fa:"شهرضا",en:"Shahreza"},{fa:"مبارکه",en:"Mobarakeh"},{fa:"دولت‌آباد",en:"Dowlatabad"},{fa:"زرین‌شهر",en:"Zarrinshahr"},{fa:"گلپایگان",en:"Golpayegan"},{fa:"آران و بیدگل",en:"Aran va Bidgol"},{fa:"نطنز",en:"Natanz"},{fa:"خوانسار",en:"Khansar"},{fa:"سمیرم",en:"Semirom"},{fa:"فریدون‌شهر",en:"Fereydunshahr"},{fa:"تیران و کرون",en:"Tiran and Karvan"},{fa:"نایین",en:"Nain"},{fa:"اردستان",en:"Ardestan"},{fa:"برخوار",en:"Barkhar"},{fa:"شاهین‌شهر",en:"Shahinsahr"},{fa:"گز",en:"Gaz"},{fa:"درچه",en:"Dorcheh"},{fa:"میمه",en:"Meymeh"}]},
    {fa_name: "البرز", en_name:"Alborz", cities:[{fa:"کرج",en:"Karaj"},{fa:"فردیس",en:"Fardis"},{fa:"کمال‌شهر",en:"Kamalshahr"},{fa:"نظرآباد",en:"Nazarabad"},{fa:"محمدشهر",en:"Mohammadshahr"},{fa:"مشکین‌دشت",en:"Meshkin Dasht"},{fa:"هشتگرد",en:"Hashtgerd"},{fa:"اشتهارد",en:"Eshtehard"},{fa:"طالقان",en:"Taleqan"},{fa:"شهر جدید هشتگرد",en:"New Hashtgerd"},{fa:"چهارباغ",en:"Chaharbagh"},{fa:"ماهدشت",en:"Mahdasht"},{fa:"ساوجبلاغ",en:"Savojbolagh"},{fa:"کوهسار",en:"Kuhsar"},{fa:"نظرآباد",en:"Nazarabad"},{fa:"گرمدره",en:"Garmdareh"},{fa:"تنکمان",en:"Tanakman"},{fa:"کردان",en:"Kordan"},{fa:"هیو",en:"Hiv"},{fa:"گلسار",en:"Golsar"},{fa:"مشکین دشت",en:"Mashkin Dasht"}]},
    {fa_name: "ایلام", en_name:"Ilam", cities:[{fa:"ایلام",en:"Ilam"},{fa:"دهلران",en:"Dehloran"},{fa:"ایوان",en:"Eyvan"},{fa:"آبدانان",en:"Abdanan"},{fa:"دره‌شهر",en:"Darreh Shahr"},{fa:"مهران",en:"Mehran"},{fa:"سرابله",en:"Sarableh"},{fa:"چرداول",en:"Cherdavel"},{fa:"بدره",en:"Badreh"},{fa:"ملکشاهی",en:"Malekshahi"},{fa:"سیروان",en:"Sirvan"},{fa:"چوار",en:"Chavar"},{fa:"صالح‌آباد",en:"Salehabad"},{fa:"لومار",en:"Lomar"},{fa:"مورموری",en:"Mormori"},{fa:"سراب باغ",en:"Sarabbagh"},{fa:"زرنه",en:"Zarneh"},{fa:"موسیان",en:"Musian"},{fa:"مهران",en:"Mehran"},{fa:"ارکواز",en:"Arkwaz"},{fa:"پهله",en:"Pahleh"}]},
    {fa_name: "بوشهر", en_name:"Bushehr", cities:[{fa:"بوشهر",en:"Bushehr"},{fa:"دشتستان",en:"Dashtestan"},{fa:"گناوه",en:"Ganaveh"},{fa:"کنگان",en:"Kangan"},{fa:"جم",en:"Jam"},{fa:"دیر",en:"Deyr"},{fa:"دیلم",en:"Deylam"},{fa:"عسلویه",en:"Asaluyeh"},{fa:"دشتی",en:"Dashti"},{fa:"تنگستان",en:"Tangestan"},{fa:"آب‌پخش",en:"Abpakhsh"},{fa:"برازجان",en:"Borazjan"},{fa:"خورموج",en:"Khurmuj"},{fa:"اهرم",en:"Ahram"},{fa:"بندر ریگ",en:"Bandar Rig"},{fa:"بندر سیراف",en:"Bandar Siraf"},{fa:"سعدآباد",en:"Sadabad"},{fa:"شبانکاره",en:"Shabankareh"},{fa:"وحدتیه",en:"Wahdatiyeh"},{fa:"چغادک",en:"Choghadek"},{fa:"عالی‌شهر",en:"Alishahr"}]},
    {fa_name: "تهران", en_name:"Tehran", cities:[{fa:"تهران",en:"Tehran"},{fa:"اسلامشهر",en:"Islamshahr"},{fa:"شهریار",en:"Shahriar"},{fa:"قدس",en:"Qods"},{fa:"ملارد",en:"Malard"},{fa:"ری",en:"Rey"},{fa:"ورامین",en:"Varamin"},{fa:"پاکدشت",en:"Pakdasht"},{fa:"قرچک",en:"Qarchak"},{fa:"بهارستان",en:"Baharestan"},{fa:"دماوند",en:"Damavand"},{fa:"فیروزکوه",en:"Firoozkooh"},{fa:"رباط‌کریم",en:"Robat Karim"},{fa:"پردیس",en:"Pardis"},{fa:"شمیرانات",en:"Shemiranat"},{fa:"اندیشه",en:"Andisheh"},{fa:"لواسان",en:"Lavasan"},{fa:"کهریزک",en:"Kahrizak"},{fa:"شاهدشهر",en:"Shahdshahr"},{fa:"بومهن",en:"Bumehen"},{fa:"فشم",en:"Fasham"},{fa:"پیشوا",en:"Pishva"}]},
    {fa_name: "چهارمحال و بختیاری", en_name:"Chaharmahal and Bakhtiari", cities:[{fa:"شهرکرد",en:"Shahr-e Kord"},{fa:"بروجن",en:"Borujen"},{fa:"فارسان",en:"Farsan"},{fa:"اردل",en:"Ardal"},{fa:"لردگان",en:"Lordegan"},{fa:"کیار",en:"Kiar"},{fa:"کوهرنگ",en:"Koohrang"},{fa:"سامان",en:"Saman"},{fa:"بن",en:"Ben"},{fa:"فرخشهر",en:"Farrokhshahr"},{fa:"جونقان",en:"Joneqan"},{fa:"گندمان",en:"Gandoman"},{fa:"بلداجی",en:"Boldaji"},{fa:"چلیچه",en:"Chelicheh"},{fa:"باباحیدر",en:"Babahidar"},{fa:"هفشجان",en:"Hefshjan"},{fa:"سودجان",en:"Soudjan"},{fa:"شلمزار",en:"Shalamzar"},{fa:"پیربکران",en:"Pirbakran"},{fa:"آلیکوه",en:"Alikuh"},{fa:"سفیددشت",en:"Sefiddasht"}]},
    {fa_name: "خراسان جنوبی", en_name:"South Khorasan", cities:[{fa:"بیرجند",en:"Birjand"},{fa:"قاین",en:"Qaen"},{fa:"طبس",en:"Tabas"},{fa:"فردوس",en:"Ferdows"},{fa:"نهبندان",en:"Nahbandan"},{fa:"سربیشه",en:"Sarbisheh"},{fa:"بشرویه",en:"Boshruyeh"},{fa:"درمیان",en:"Darmian"},{fa:"سرایان",en:"Sarayan"},{fa:"خوسف",en:"Khusf"},{fa:"زیرکوه",en:"Zirkouh"},{fa:"اسدیه",en:"Asadiyeh"},{fa:"آیسک",en:"Ayesk"},{fa:"ارسک",en:"Arask"},{fa:"دیهوک",en:"Deyhuk"},{fa:"قاینات",en:"Qaenat"},{fa:"مود",en:"Moud"},{fa:"درح",en:"Darah"},{fa:"باغستان",en:"Baghestan"},{fa:"خوسف",en:"Khusf"},{fa:"آرین شهر",en:"Arian Shahr"}]},
    {fa_name: "خراسان رضوی", en_name:"Razavi Khorasan", cities:[{fa:"مشهد",en:"Mashhad"},{fa:"نیشابور",en:"Neyshabur"},{fa:"سبزوار",en:"Sabzevar"},{fa:"تربت حیدریه",en:"Torbat-e Heydarieh"},{fa:"کاشمر",en:"Kashmar"},{fa:"قوچان",en:"Quchan"},{fa:"تربت جام",en:"Torbat-e Jam"},{fa:"چناران",en:"Chenaran"},{fa:"سرخس",en:"Sarakhs"},{fa:"گناباد",en:"Gonabad"},{fa:"فریمان",en:"Fariman"},{fa:"خواف",en:"Khaf"},{fa:"درگز",en:"Daragaz"},{fa:"طرقبه شاندیز",en:"Torqabeh-Shandiz"},{fa:"بجستان",en:"Bajestan"},{fa:"کلات",en:"Kalat"},{fa:"بردسکن",en:"Bardaskan"},{fa:"تایباد",en:"Taybad"},{fa:"فیروزه",en:"Firoozeh"},{fa:"طرقبه",en:"Torqabeh"},{fa:"شاندیز",en:"Shandiz"},{fa:"گلمکان",en:"Golmakan"}]},
    {fa_name: "خراسان شمالی", en_name:"North Khorasan", cities:[{fa:"بجنورد",en:"Bojnourd"},{fa:"شیروان",en:"Shirvan"},{fa:"اسفراین",en:"Esfarayen"},{fa:"مانه و سملقان",en:"Maneh and Samalqan"},{fa:"جاجرم",en:"Jajarm"},{fa:"فاروج",en:"Faruj"},{fa:"راز و جرگلان",en:"Raz and Jargalan"},{fa:"گرمه",en:"Garmeh"},{fa:"بجنورد شمالی",en:"North Bojnourd"},{fa:"راز",en:"Raz"},{fa:"شوقان",en:"Shoqan"},{fa:"سنخواست",en:"Senkhvast"},{fa:"درق",en:"Darq"},{fa:"غلامان",en:"Gholaman"},{fa:"صفی‌آباد",en:"Safiyabad"},{fa:"آشخانه",en:"Ashkhaneh"},{fa:"تاتار",en:"Tatar"},{fa:"بام و صفی‌آباد",en:"Bam and Safiabad"},{fa:"دشت",en:"Dasht"},{fa:"غلامان",en:"Gholaman"}]},
    {fa_name: "خوزستان", en_name:"Khuzestan", cities:[{fa:"اهواز",en:"Ahvaz"},{fa:"دزفول",en:"Dezful"},{fa:"آبادان",en:"Abadan"},{fa:"خرمشهر",en:"Khorramshahr"},{fa:"اندیمشک",en:"Andimeshk"},{fa:"ایذه",en:"Izeh"},{fa:"بهبهان",en:"Behbahan"},{fa:"مسجد سلیمان",en:"Masjed Soleyman"},{fa:"شوشتر",en:"Shushtar"},{fa:"شادگان",en:"Shadegan"},{fa:"ماهشهر",en:"Mahshahr"},{fa:"امیدیه",en:"Omidiyeh"},{fa:"سوسنگرد",en:"Susangerd"},{fa:"اندیکا",en:"Andika"},{fa:"باغملک",en:"Baghmalek"},{fa:"هندیجان",en:"Hendijan"},{fa:"شوش",en:"Shush"},{fa:"لالی",en:"Lali"},{fa:"ملاثانی",en:"Malasani"},{fa:"گتوند",en:"Gotvand"},{fa:"ایذه",en:"Izeh"}]},
    {fa_name: "زنجان", en_name:"Zanjan", cities:[{fa:"زنجان",en:"Zanjan"},{fa:"ابهر",en:"Abhar"},{fa:"خرمدره",en:"Khorramdarreh"},{fa:"قیدار",en:"Qeydar"},{fa:"طارم",en:"Tarom"},{fa:"خدابنده",en:"Khodabandeh"},{fa:"ماهنشان",en:"Mahneshan"},{fa:"ایجرود",en:"Ijrud"},{fa:"سلطانیه",en:"Soltaniyeh"},{fa:"سجاس",en:"Sajas"},{fa:"زرین رود",en:"Zarrinrood"},{fa:"آب بر",en:"Abbar"},{fa:"هیدج",en:"Hidaj"},{fa:"دندی",en:"Dandi"},{fa:"ارمغانخانه",en:"Armaghan Khaneh"},{fa:"گزار",en:"Gozar"},{fa:"قره‌پشتلو",en:"Qareh Poshtlu"},{fa:"شریف‌آباد",en:"Sharifabad"},{fa:"کرسف",en:"Karsaf"},{fa:"زرین‌آباد",en:"Zarinabad"},{fa:"سهرورد",en:"Sohrevard"}]},
    {fa_name: "سمنان", en_name:"Semnan", cities:[{fa:"سمنان",en:"Semnan"},{fa:"شاهرود",en:"Shahrood"},{fa:"دامغان",en:"Damghan"},{fa:"گرمسار",en:"Garmsar"},{fa:"مهدی‌شهر",en:"Mehdishahr"},{fa:"میامی",en:"Meyami"},{fa:"بسطام",en:"Bastam"},{fa:"سرخه",en:"Sorkheh"},{fa:"دیباج",en:"Dibaj"},{fa:"کلاته خیج",en:"Kalateh Khij"},{fa:"بیارجمند",en:"Beyarjomand"},{fa:"درجزین",en:"Darjazin"},{fa:"شهمیرزاد",en:"Shahmirzad"},{fa:"ایوانکی",en:"Eyvanaki"},{fa:"مجن",en:"Mojen"},{fa:"کالپوش",en:"Kalpush"},{fa:"فولادمحله",en:"Fuladmahalleh"},{fa:"رودیان",en:"Rudiyan"},{fa:"دزیان",en:"Dazian"},{fa:"شیرخانلو",en:"Shir Khanlu"}]},
    {fa_name: "سیستان و بلوچستان", en_name:"Sistan and Baluchestan", cities:[{fa:"زاهدان",en:"Zahedan"},{fa:"چابهار",en:"Chabahar"},{fa:"زابل",en:"Zabol"},{fa:"ایرانشهر",en:"Iranshahr"},{fa:"سراوان",en:"Saravan"},{fa:"خاش",en:"Khash"},{fa:"کنارک",en:"Konarak"},{fa:"نیک‌شهر",en:"Nik Shahr"},{fa:"سرباز",en:"Sarbas"},{fa:"راسک",en:"Rask"},{fa:"فنوج",en:"Fanuj"},{fa:"مهرستان",en:"Mhrestan"},{fa:"سیب و سوران",en:"Sib and Suran"},{fa:"دلگان",en:"Dalgan"},{fa:"بمپور",en:"Bampur"},{fa:"قصرقند",en:"Qasrqand"},{fa:"میرجاوه",en:"Mirjaveh"},{fa:"زهک",en:"Zehak"},{fa:"نیمروز",en:"Nimroz"},{fa:"پیشین",en:"Pishin"},{fa:"سراوان",en:"Saravan"}]},
    {fa_name: "فارس", en_name:"Fars", cities:[{fa:"شیراز",en:"Shiraz"},{fa:"مرودشت",en:"Marvdasht"},{fa:"کازرون",en:"Kazerun"},{fa:"جهرم",en:"Jahrom"},{fa:"لارستان",en:"Larestan"},{fa:"فسا",en:"Fasa"},{fa:"داراب",en:"Darab"},{fa:"فیروزآباد",en:"Firoozabad"},{fa:"اقلید",en:"Eqlid"},{fa:"نی‌ریز",en:"Neyriz"},{fa:"استهبان",en:"Estahban"},{fa:"آباده",en:"Abadeh"},{fa:"لامرد",en:"Lamerd"},{fa:"سپیدان",en:"Sepidan"},{fa:"کوه‌چنار",en:"Kuhchenar"},{fa:"ممسنی",en:"Mamasani"},{fa:"بوانات",en:"Bavanat"},{fa:"سروستان",en:"Sarvestan"},{fa:"زرین‌دشت",en:"Zarrin Dasht"},{fa:"مهر",en:"Mohr"},{fa:"خرامه",en:"Khorameh"}]},
    {fa_name: "قزوین", en_name:"Qazvin", cities:[{fa:"قزوین",en:"Qazvin"},{fa:"تاکستان",en:"Takestan"},{fa:"الوند",en:"Alvand"},{fa:"بوئین‌زهرا",en:"Buin Zahra"},{fa:"آبیک",en:"Abeyek"},{fa:"محمدیه",en:"Mohammadieh"},{fa:"شال",en:"Shal"},{fa:"آوج",en:"Avaj"},{fa:"سیردان",en:"Sirdan"},{fa:"ضیاءآباد",en:"Ziyaabad"},{fa:"ارداق",en:"Ardaq"},{fa:"اقبالیه",en:"Eqbaliyeh"},{fa:"خوزنین",en:"Khuznin"},{fa:"قاقازان",en:"Qaqazan"},{fa:"خرمدشت",en:"Khorramdasht"},{fa:"معلم‌کلایه",en:"Moallem Kalayeh"},{fa:"آبگرم",en:"Abgarm"},{fa:"دانسفهان",en:"Danesfahan"},{fa:"نبی‌آباد",en:"Nabiabad"},{fa:"بیدستان",en:"Bidestan"},{fa:"سگزی",en:"Segzi"}]},
    {fa_name: "قم", en_name:"Qom", cities:[{fa:"قم",en:"Qom", lat:34.646, lon:50.8789},{fa:"سلفچگان",en:"Salafchegan"},{fa:"جعفریه",en:"Jafariyeh"},{fa:"کهک",en:"Kahak"},{fa:"دستجرد",en:"Dastjerd"},{fa:"قنوات",en:"Qanavat"},{fa:"فردو",en:"Fordo"},{fa:"قاهان",en:"Qahan"},{fa:"زیدآباد",en:"Zeydabad"},{fa:"جعفریه",en:"Jafariyeh"},{fa:"علی‌آباد",en:"Aliabad"},{fa:"سراجه",en:"Sarajeh"},{fa:"ورجان",en:"Varjan"},{fa:"نیزار",en:"Neyzar"},{fa:"جمکران",en:"Jamkaran"},{fa:"طایقان",en:"Tayqan"},{fa:"شریف‌آباد",en:"Sharifabad"},{fa:"سراجه",en:"Sarajeh"},{fa:"باغچق",en:"Baqchaq"},{fa:"دستجرد",en:"Dastjerd"},{fa:"سنان",en:"Sanan"}]},
    {fa_name: "کردستان", en_name:"Kurdistan", cities:[{fa:"سنندج",en:"Sanandaj"},{fa:"سقز",en:"Saqqez"},{fa:"مریوان",en:"Marivan"},{fa:"بانه",en:"Baneh"},{fa:"قروه",en:"Qorveh"},{fa:"کامیاران",en:"Kamyaran"},{fa:"بیجار",en:"Bijar"},{fa:"دهگلان",en:"Dehgolan"},{fa:"دیواندره",en:"Divandarreh"},{fa:"سروآباد",en:"Sarvabad"},{fa:"نمشیر",en:"Namshir"},{fa:"سریش‌آباد",en:"Sarishabad"},{fa:"یاسوکند",en:"Yasukand"},{fa:"کانی‌دینار",en:"Kani Dinar"},{fa:"بوالحسن",en:"Bohl Hasan"},{fa:"آرمرده",en:"Armardeh"},{fa:"دلبران",en:"Delbaran"},{fa:"بابارشانی",en:"Babarasani"},{fa:"شویشه",en:"Shuysheh"},{fa:"آرمرده",en:"Armardeh"},{fa:"شویشه",en:"Shuysheh"}]},
    {fa_name: "کرمان", en_name:"Kerman", cities:[{fa:"کرمان",en:"Kerman"},{fa:"سیرجان",en:"Sirjan"},{fa:"رفسنجان",en:"Rafsanjan"},{fa:"جیرفت",en:"Jiroft"},{fa:"بم",en:"Bam"},{fa:"کهنوج",en:"Kahnuj"},{fa:"زرند",en:"Zarand"},{fa:"بافت",en:"Baft"},{fa:"بردسیر",en:"Bardsir"},{fa:"راور",en:"Ravar"},{fa:"شهربابک",en:"Shahrebabak"},{fa:"عنبرآباد",en:"Anbarabad"},{fa:"قلعه‌گنج",en:"Qaleh Ganj"},{fa:"کوهبنان",en:"Kuhbanan"},{fa:"فاریاب",en:"Faryab"},{fa:"ریگان",en:"Rigan"},{fa:"ارزوئیه",en:"Arzuyeh"},{fa:"رودبار جنوب",en:"Rudbar Jonubi"},{fa:"رابر",en:"Rabor"},{fa:"منوجان",en:"Manujan"},{fa:"شهداد",en:"Shahdad"}]},
    {fa_name: "کرمانشاه", en_name:"Kermanshah", cities:[{fa:"کرمانشاه",en:"Kermanshah"},{fa:"اسلام‌آباد غرب",en:"Eslamabad-e Gharb"},{fa:"جوانرود",en:"Javanrud"},{fa:"کنگاور",en:"Kangavar"},{fa:"سرپل ذهاب",en:"Sarpol-e Zahab"},{fa:"سنقر",en:"Sonqor"},{fa:"پاوه",en:"Paveh"},{fa:"صحنه",en:"Sahneh"},{fa:"هرسین",en:"Harsin"},{fa:"روانسر",en:"Ravansar"},{fa:"گیلانغرب",en:"Gilan-e Gharb"},{fa:"قصر شیرین",en:"Qasr-e Shirin"},{fa:"دالاهو",en:"Dalahu"},{fa:"ثلاث باباجانی",en:"Salas-e Babajani"},{fa:"بیستون",en:"Bisotun"},{fa:"کوزران",en:"Koozeran"},{fa:"رباط",en:"Rabat"},{fa:"کوزران",en:"Koozeran"},{fa:"درودفرامان",en:"Darud Faraman"},{fa:"کامیاران",en:"Kamyaran"}]},
    {fa_name: "کهگیلویه و بویراحمد", en_name:"Kohgiluyeh and Boyer-Ahmad", cities:[{fa:"یاسوج",en:"Yasuj"},{fa:"گچساران",en:"Gachsaran"},{fa:"دهدشت",en:"Dehdasht"},{fa:"دوگنبدان",en:"Dogonbadan"},{fa:"لنده",en:"Lendeh"},{fa:"لیکک",en:"Likak"},{fa:"چرام",en:"Charam"},{fa:"باشت",en:"Basht"},{fa:"پاتاوه",en:"Pataveh"},{fa:"سی‌سخت",en:"Sisikht"},{fa:"سوق",en:"Souq"},{fa:"قلعه رئیسی",en:"Qaleh Raisi"},{fa:"دیشموک",en:"Dishmok"},{fa:"مارگون",en:"Margoon"},{fa:"سرفاریاب",en:"Sar Faryab"},{fa:"چیتاب",en:"Chitad"},{fa:"سیسخت",en:"Sisikht"},{fa:"مادوان",en:"Madvan"},{fa:"بویر احمد",en:"Boyer-Ahmad"},{fa:"قلعه گل",en:"Qaleh Gol"}]},
    {fa_name: "گلستان", en_name:"Golestan", cities:[{fa:"گرگان",en:"Gorgan"},{fa:"گنبد کاووس",en:"Gonbad-e Kavus"},{fa:"علی‌آباد کتول",en:"Aliabad-e Katul"},{fa:"آق‌قلا",en:"Aq Qala"},{fa:"کردکوی",en:"Kordkuy"},{fa:"بندر ترکمن",en:"Bandar-e Torkaman"},{fa:"آزادشهر",en:"Azadshahr"},{fa:"رامیان",en:"Ramian"},{fa:"کلاله",en:"Kalaleh"},{fa:"مینودشت",en:"Minudasht"},{fa:"گالیکش",en:"Galikesh"},{fa:"گمیشان",en:"Gomishan"},{fa:"مراوه‌تپه",en:"Maraveh Tappeh"},{fa:"بندر گز",en:"Bandar-e Gaz"},{fa:"خان‌ببین",en:"Khan Bebin"},{fa:"سیمین‌شهر",en:"Simin Shahr"},{fa:"فاضل‌آباد",en:"Fazelabad"},{fa:"جلین",en:"Jalin"},{fa:"انبار آلوم",en:"Anbar Alum"},{fa:"فندرسک",en:"Fanderesk"},{fa:"دلند",en:"Dalanda"}]},
    {fa_name: "گیلان", en_name:"Gilan", cities:[{fa:"رشت",en:"Rasht"},{fa:"بندر انزلی",en:"Bandar-e Anzali"},{fa:"لاهیجان",en:"Lahijan"},{fa:"تالش",en:"Talesh", lat:37.80, lon:48.91},{fa:"لنگرود",en:"Langerud"},{fa:"رودسر",en:"Rudsar"},{fa:"صومعه‌سرا",en:"Sowme'eh Sara"},{fa:"آستانه اشرفیه",en:"Astaneh-ye Ashrafiyeh"},{fa:"آستارا",en:"Astara"},{fa:"فومن",en:"Fuman"},{fa:"ماسال",en:"Masal"},{fa:"شفت",en:"Shaft"},{fa:"رضوانشهر",en:"Rezvanshahr"},{fa:"رودبار",en:"Rudbar"},{fa:"سیاهکل",en:"Siahkal"},{fa:"املش",en:"Amlash"},{fa:"رحیم‌آباد",en:"Rahimabad"},{fa:"لوندویل",en:"Lovandivil"},{fa:"کومله",en:"Kumeleh"},{fa:"خشکبیجار",en:"Khoshk Bijar"},{fa:"سنگر",en:"Sangar"}]},
    {fa_name: "لرستان", en_name:"Lorestan", cities:[{fa:"خرم‌آباد",en:"Khorramabad"},{fa:"بروجرد",en:"Borujerd"},{fa:"دورود",en:"Dorud"},{fa:"کوهدشت",en:"Kuhdasht"},{fa:"الیگودرز",en:"Aligudarz"},{fa:"ازنا",en:"Azna"},{fa:"پلدختر",en:"Poldokhtar"},{fa:"الشتر",en:"Alashtar"},{fa:"نورآباد",en:"Nurabad"},{fa:"دورود",en:"Dorud"},{fa:"معمولان",en:"Mamulan"},{fa:"چغلوندی",en:"Chogholvandi"},{fa:"سپیددشت",en:"Sefiddasht"},{fa:"بخش مرکزی",en:"Markazi District"},{fa:"کاکاوند",en:"Kakavand"},{fa:"پاپی",en:"Papi"},{fa:"درود",en:"Dorud"},{fa:"بروجرد جنوبی",en:"South Borujerd"},{fa:"کمالوند",en:"Kamalvand"},{fa:"دورود",en:"Dorud"},{fa:"کونانی",en:"Kunani"}]},
    {fa_name: "مازندران", en_name:"Mazandaran", cities:[{fa:"ساری",en:"Sari"},{fa:"بابل",en:"Babol"},{fa:"آمل",en:"Amol"},{fa:"قائم‌شهر",en:"Qaemshahr"},{fa:"بهشهر",en:"Behshahr"},{fa:"چالوس",en:"Chalus"},{fa:"بابلسر",en:"Babolsar"},{fa:"نکا",en:"Neka"},{fa:"رامسر",en:"Ramsar"},{fa:"تنکابن",en:"Tonekabon"},{fa:"نوشهر",en:"Nowshahr"},{fa:"جویبار",en:"Juybar"},{fa:"محمودآباد",en:"Mahmudabad"},{fa:"سوادکوه",en:"Savadkuh"},{fa:"سیمرغ",en:"Simorgh"},{fa:"عباس‌آباد",en:"Abbasabad"},{fa:"گلوگاه",en:"Galugah"},{fa:"پل سفید",en:"Pol-e Sefid"},{fa:"فریدون‌کنار",en:"Fereydunkenar"},{fa:"رویان",en:"Royan"},{fa:"سلمان‌شهر",en:"Salmanshahr"}]},
    {fa_name: "مرکزی", en_name:"Markazi", cities:[{fa:"اراک",en:"Arak"},{fa:"ساوه",en:"Saveh"},{fa:"خمین",en:"Khomeyn"},{fa:"محلات",en:"Mahallat"},{fa:"دلیجان",en:"Delijan"},{fa:"تفرش",en:"Tafresh"},{fa:"شازند",en:"Shazand"},{fa:"کمیجان",en:"Komijan"},{fa:"فراهان",en:"Farahan"},{fa:"آشتیان",en:"Ashtian"},{fa:"زرندیه",en:"Zarandieh"},{fa:"غرق‌آباد",en:"Qarqabad"},{fa:"نوبران",en:"Nowbaran"},{fa:"خنداب",en:"Khandab"},{fa:"میلاجرد",en:"Milajerd"},{fa:"کارچان",en:"Karchan"},{fa:"مهاجران",en:"Mohajeran"},{fa:"هندودر",en:"Hendudar"},{fa:"قورچی‌باشی",en:"Qurchibashi"},{fa:"مامونیه",en:"Mamuniyeh"},{fa:"سنجان",en:"Sanjan"}]},
    {fa_name: "هرمزگان", en_name:"Hormozgan", cities:[{fa:"بندرعباس",en:"Bandar Abbas"},{fa:"میناب",en:"Minab"},{fa:"بندر لنگه",en:"Bandar Lengeh"},{fa:"قشم",en:"Qeshm", lat:26.95, lon:56.27},{fa:"کیش",en:"Kish", lat:26.53, lon:53.98},{fa:"رودان",en:"Rudan"},{fa:"بستک",en:"Bastak"},{fa:"حاجی‌آباد",en:"Hajiabad"},{fa:"پارسیان",en:"Parsian"},{fa:"جاسک",en:"Jask"},{fa:"بشاگرد",en:"Bashagard"},{fa:"سیریک",en:"Sirik"},{fa:"ابوموسی",en:"Abu Musa"},{fa:"فین",en:"Fin"},{fa:"درگهان",en:"Dargahan"},{fa:"هرمز",en:"Hormuz"},{fa:"بندرلنگه",en:"Bandar Lengeh"},{fa:"چارک",en:"Chark"},{fa:"رودخانه",en:"Rudkhaneh"},{fa:"سردشت",en:"Sardasht"},{fa:"گروک",en:"Garok"},{fa:"لیردف",en:"Lirdaf"}]},
    {fa_name: "همدان", en_name:"Hamedan", cities:[{fa:"همدان",en:"Hamedan"},{fa:"ملایر",en:"Malayer"},{fa:"نهاوند",en:"Nahavand"},{fa:"تویسرکان",en:"Tuyserkan"},{fa:"اسدآباد",en:"Asadabad"},{fa:"کبودرآهنگ",en:"Kabudarahang"},{fa:"بهار",en:"Bahar"},{fa:"رزن",en:"Razan"},{fa:"فامنین",en:"Famenin"},{fa:"قهاوند",en:"Qahavand"},{fa:"مریانج",en:"Mariyanaj"},{fa:"جورقان",en:"Jurqan"},{fa:"شیرین‌سو",en:"Shirin Su"},{fa:"صالح‌آباد",en:"Salehabad"},{fa:"دمق",en:"Damaq"},{fa:"سنگستان",en:"Sangestan"},{fa:"اسلام‌شهر",en:"Eslamshahr"},{fa:"لالجین",en:"Lalejin"},{fa:"گیان",en:"Giyan"},{fa:"قروه درجزین",en:"Qorveh Darjazin"}]},
    {fa_name: "یزد", en_name:"Yazd", cities:[{fa:"یزد",en:"Yazd"},{fa:"میبد",en:"Meybod"},{fa:"اردکان",en:"Ardakan"},{fa:"تفت",en:"Taft"},{fa:"بافق",en:"Bafq"},{fa:"ابرکوه",en:"Abarkuh"},{fa:"مهریز",en:"Mehriz"},{fa:"اشکذر",en:"Ashkezar"},{fa:"طبس",en:"Tabas"},{fa:"هرات",en:"Herat"},{fa:"مروست",en:"Marvast"},{fa:"عقدا",en:"Aqda"},{fa:"بهاباد",en:"Bahabad"},{fa:"زارچ",en:"Zarch"},{fa:"نیر",en:"Nir"},{fa:"احمدآباد",en:"Ahmadabad"},{fa:"سرداب",en:"Sardab"},{fa:"صدرآباد",en:"Sadraabad"},{fa:"فهرج",en:"Fahraj"},{fa:"عیش‌آباد",en:"Eishabad"},{fa:"مروست",en:"Marvast"}]}
];

const provinceSelect = document.getElementById("provinceSelect");
const citySelect = document.getElementById("citySelect");
const cityInfoBox = document.getElementById("cityInfo");

provinces.forEach(prov => {
    const option = document.createElement("option");
    option.value = prov.fa_name;
    option.textContent = prov.fa_name;
    provinceSelect.appendChild(option);
});

provinceSelect.addEventListener("change", () => {
    const selected = provinces.find(p => p.fa_name === provinceSelect.value);
    citySelect.innerHTML = '<option value="">شهر را انتخاب کنید</option>';
    if (selected) {
        selected.cities.forEach(city => {
            const option = document.createElement("option");
            option.value = city.fa;
            option.textContent = city.fa;
            citySelect.appendChild(option);
        });
    }
});

async function showCityInfo() {
    const selectedProvince = provinceSelect.value;
    const selectedCity = citySelect.value;

    if (!selectedProvince || !selectedCity) {
        return alert("لطفاً استان و شهر را انتخاب کنید.");
    }
    
    cityInfoBox.style.display = "block";
    cityInfoBox.innerHTML = `<h2>${selectedCity}</h2><p>⏳ در حال بارگذاری...</p>`;
    
    const provinceObj = provinces.find(p => p.fa_name === selectedProvince);
    const cityObj = provinceObj.cities.find(c => c.fa === selectedCity);

    let apiURL = '';
    let forecastURL = '';

    if (cityObj.lat && cityObj.lon) {
        // Use coordinates for problematic cities
        apiURL = `https://api.openweathermap.org/data/2.5/weather?lat=${cityObj.lat}&lon=${cityObj.lon}&appid=${API_KEY}&units=metric&lang=fa`;
        forecastURL = `https://api.openweathermap.org/data/2.5/forecast?lat=${cityObj.lat}&lon=${cityObj.lon}&appid=${API_KEY}&units=metric&lang=fa`;
    } else {
        // Fallback to city name for all others
        apiURL = `https://api.openweathermap.org/data/2.5/weather?q=${cityObj.en},IR&appid=${API_KEY}&units=metric&lang=fa`;
        forecastURL = `https://api.openweathermap.org/data/2.5/forecast?q=${cityObj.en},IR&appid=${API_KEY}&units=metric&lang=fa`;
    }

    try {
        const weatherRes = await fetch(apiURL);
        if (!weatherRes.ok) throw new Error("خطا در دریافت اطلاعات آب‌وهوا");
        const weatherData = await weatherRes.json();
        
        const forecastRes = await fetch(forecastURL);
        if (!forecastRes.ok) throw new Error("خطا در دریافت پیش‌بینی آب‌وهوا");
        const forecastData = await forecastRes.json();

        const iconCode = weatherData.weather[0].icon;
        const iconUrl = `http://openweathermap.org/img/wn/${iconCode}@2x.png`;
        
        let forecastHtml = "<h3>پیش‌بینی ۵ روز آینده:</h3><ul class='forecast-list'>";
        const dailyForecasts = forecastData.list.filter(item => item.dt_txt.includes("12:00:00"));
        dailyForecasts.slice(0, 5).forEach(item => {
            const dayName = new Date(item.dt * 1000).toLocaleDateString('fa-IR', { weekday: 'long' });
            const forecastIconCode = item.weather[0].icon;
            const forecastIconUrl = `http://openweathermap.org/img/wn/${forecastIconCode}.png`;
            forecastHtml += `
                <li>
                    <strong>${dayName}</strong>
                    <img src="${forecastIconUrl}" alt="${item.weather[0].description}" />
                    <p>${item.weather[0].description}</p>
                    <p> ${Math.round(item.main.temp_max)}°C / ${Math.round(item.main.temp_min)}°C</p>
                </li>
            `;
        });
        forecastHtml += "</ul>";

        cityInfoBox.innerHTML = `
            <h2>${selectedCity}</h2>
            <div class="weather-main-info">
                <img src="${iconUrl}" alt="${weatherData.weather[0].description}" class="weather-icon">
                <p><strong>دما:</strong> ${Math.round(weatherData.main.temp)}°C</p>
                <p><strong>آب‌وهوا:</strong> ${weatherData.weather[0].description}</p>
            </div>
            <p><strong>حداقل دما:</strong> ${Math.round(weatherData.main.temp_min)}°C | <strong>حداکثر دما:</strong> ${Math.round(weatherData.main.temp_max)}°C</p>
            <p><strong>رطوبت:</strong> ${weatherData.main.humidity}% | <strong>سرعت باد:</strong> ${weatherData.wind.speed} m/s</p>
            ${forecastHtml}
        `;
    } catch (e) {
        console.error(e);
        cityInfoBox.innerHTML = `<h2>${selectedCity}</h2><p>❌ خطایی در دریافت اطلاعات رخ داده است. لطفاً دوباره تلاش کنید.</p>`;
    }
}

function updateDateTime() {
    const now = new Date();
    const date = now.toLocaleDateString('fa-IR', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
    const time = now.toLocaleTimeString('fa-IR', { hour: '2-digit', minute: '2-digit', second: '2-digit' });
    document.getElementById("datetime").textContent = `${date} - ${time}`;
}
setInterval(updateDateTime, 1000);
updateDateTime();

const commentForm = document.getElementById("commentForm");
const commentList = document.getElementById("commentList");
const colors = ["#e0f7ff", "#e6fff2", "#f7e0ff", "#fff0e0"];

function loadComments() {
    let comments = JSON.parse(localStorage.getItem("comments") || "[]");
    commentList.innerHTML = "";
    comments.forEach((c, i) => {
        let li = document.createElement("li");
        li.textContent = `${c.name}: ${c.message}`;
        li.style.background = colors[i % colors.length];
        commentList.appendChild(li);
    });
}
commentForm.addEventListener("submit", e => {
    e.preventDefault();
    let name = document.getElementById("name").value.trim();
    let message = document.getElementById("message").value.trim();
    if (name && message) {
        let comments = JSON.parse(localStorage.getItem("comments") || "[]");
        comments.unshift({ name, message });
        localStorage.setItem("comments", JSON.stringify(comments));
        commentForm.reset();
        loadComments();
    }
});
loadComments();
</script>
</body>
</html>
